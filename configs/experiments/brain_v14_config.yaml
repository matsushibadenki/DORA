# SNN Project v14.0 Configuration (Updated for Phase 2)
# ファイルパス：configs/experiments/brain_v14_config.yaml

seed: 42
device: "auto"

data:
  path: "data/sample_data.jsonl"
  format: "simple_text"
  tokenizer_name: "gpt2"

model:
  # メインの思考エンジン (SFormer -> Bio-PCNet統合)
  architecture_type: "bio_pc_network" # アーキテクチャを明示
  d_model: 256
  num_layers: 6
  
  # Phase 2 必須: 適応的LIFニューロン設定
  neuron:
    type: "adaptive_lif" 
    tau_mem: 20.0        # 膜電位時定数 (ms)
    tau_adap: 200.0      # 適応閾値時定数 (ms) - 膜電位より10倍遅い
    v_threshold: 1.0     # ベース閾値
    v_reset: 0.0         # リセット電位
    theta_plus: 0.5      # 発火ごとの閾値上昇量 (Sparsity強制)
    
  # ネットワーク構造設定
  network:
    layer_sizes: [784, 512, 256, 10] # 例: Vision Task
    inference_steps: 12  # 推論(Relaxation)の反復回数
    sparsity: 0.05       # 目標スパース度 5%

training:
  paradigm: "bio-causal-online" # オンライン学習パラダイム
  epochs: 10
  batch_size: 1 # 生物学的妥当性のためバッチサイズ1を基本とするが、効率化のためミニバッチも許容
  
  # 睡眠学習・可塑性設定
  biologically_plausible:
    learning_rule: "STABILIZED_STDP" # 今回実装した学習則
    
    # 安定化STDP設定
    stdp:
      learning_rate: 0.005
      tau_pre: 20.0
      tau_post: 20.0
      w_max: 1.0
      w_min: 0.0
      
      # 恒常性維持 (Homeostasis) - Phase 2 最重要項目
      target_rate: 0.05       # 目標発火率 5%
      homeostasis_rate: 0.001 # 乖離補正の強さ
    
    # 学習のタイミング制御
    plasticity_schedule:
      start_step: 8 # 推論ステップの後半(8step目以降)でのみ重み更新を行う（安定化のため）

cognitive:
  workspace:
    capacity: 7
    decay_rate: 0.1
  
  sleep:
    cycle_interval: 100
    min_sleep_duration: 10
    consolidation_epochs: 5