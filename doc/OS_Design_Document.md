# **Neuromorphic Research OS 設計方針書 🖥️**

## **1\. 概要**

本OSは、汎用的な計算資源管理（CPU/Memory）を行う従来のOSとは異なり、**「スパイキングニューラルネットワーク（SNN）そのものを計算基盤とする」** 特殊なオペレーティングシステムである。

DORA (Distributed Online Reactive Architecture) カーネル上で動作し、人工脳の恒常性維持、タスクスケジューリング、および外部インターフェースを提供する。

## **2\. 設計思想: Brain as an OS**

脳の機能を、OSの用語で再定義して実装する。

| 生物学的機能 | OSにおける対応概念 | 実装モジュール |
| :---- | :---- | :---- |
| **意識 (Consciousness)** | システムバス / ブロードキャスト | GlobalWorkspace |
| **注意 (Attention)** | プロセススケジューリング / 割り込み | NeuromorphicOS |
| **エネルギー (Glucose)** | リソース管理 / バッテリー管理 | AstrocyteNetwork |
| **睡眠 (Sleep)** | デフラグ / ガベージコレクション / 圧縮 | SleepConsolidator |
| **習慣 (Habit)** | デーモンプロセス / 自動化スクリプト | BasalGanglia |

## **3\. カーネルアーキテクチャ (Micro-Kernel)**

### **3.1 イベント駆動処理**

システムは **tick（クロック）** ベースではなく **event（スパイク）** ベースで動作する。

* **割り込み駆動:** 感覚入力（視覚、聴覚）は「割り込み（Interrupt）」として扱われ、イベントキューに挿入される。  
* **優先順位:** 強い刺激（ペイロードの大きいスパイク）や、感情的に重要なイベントは優先的に処理される。

### **3.2 リソース管理 (The Astrocyte System)**

計算コストを「エネルギー」という統一された指標で管理する。

* **活動コスト:** ニューロンが発火するたびにエネルギーを消費する。  
* **思考コスト:** process\_step を回すたびに基礎代謝を消費する。  
* **枯渇時の挙動:** エネルギーが閾値を下回ると、強制的に「Fatigue（疲労）」モードに入り、認知機能が低下（または停止）する。これにより Sleep への移行を促す。

## **4\. プロセスモデル**

### **4.1 認知サイクル (The Cognitive Loop)**

OSのメインループは以下のフェーズを繰り返す非同期ループである。

1. **Input Fetch:** 外部入力キューの確認。  
2. **SNN Forward:** DORAカーネルのイベント消化（一定時間またはイベント数で区切る）。  
3. **Monitor:** エネルギー消費量と発火率の監視。  
4. **Feedback:** 報酬信号や予測誤差に基づく可塑性の適用。  
5. **Idle:** 入力がない場合は、デフォルトネットワークモード（DMN）として低消費電力で自発活動を行うか、スリープする。

### **4.2 モード管理**

* **Wake Mode:** 外部入力を積極的に処理し、可塑性を有効化（学習）。  
* **Sleep Mode:** 外部入力を遮断。海馬（Hippocampus）に蓄積された短期記憶バッファを再生（Replay）し、皮質（Cortex）へ転送（Consolidation）する。同時に不要なシナプスの刈り込み（Pruning）を行う。

## **5\. 将来の拡張性 (Scalability)**

* **Rust Backend:** 現在Pythonで動作しているカーネルロジックをRustに移植し、Python側はAPIコールのみとする。  
* **Parallelism:** 脳の領域（Visual Cortex, Motor Cortex等）ごとにスレッドを分割し、マルチコアCPUでの並列動作を可能にする。